<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnimeSub: Text Divider</title>
    <style>
        :root {
            --bg-color: #0f0f13;
            --panel-bg: #1b1b26;
            --accent-color: #ffab00; /* Gold/Amber Theme for Divider */
            --accent-hover: #ff9100;
            --text-color: #e0e0e0;
            --muted-text: #888899;
            --border-color: #333344;
            --input-bg: #232330;
            --success-color: #00e676;
        }

        * { box-sizing: border-box; outline: none; }

        body {
            font-family: 'Segoe UI', 'Myanmar Text', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- Navigation Menu --- */
        .nav-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
            background: #15151f;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            width: 100%;
            max-width: 650px;
            flex-wrap: wrap;
        }
        .nav-link {
            text-decoration: none;
            color: var(--muted-text);
            font-weight: bold;
            padding: 8px 15px;
            border-radius: 4px;
            transition: 0.2s;
            font-size: 0.9rem;
        }
        .nav-link:hover { color: #fff; background: rgba(255,255,255,0.1); }
        .nav-link.active {
            color: #000;
            background: var(--accent-color);
            box-shadow: 0 0 10px var(--accent-color);
        }

        h1 { margin-bottom: 5px; border-bottom: 2px solid var(--accent-color); padding-bottom: 5px; }
        .subtitle { color: var(--muted-text); font-size: 0.9rem; margin-bottom: 20px; }

        .container {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* --- Input Section --- */
        .input-card {
            background: var(--panel-bg);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        textarea {
            width: 100%;
            height: 200px;
            background: var(--input-bg);
            border: 1px solid var(--border-color);
            color: #fff;
            padding: 10px;
            border-radius: 4px;
            resize: vertical;
            font-family: monospace;
            margin-top: 10px;
        }
        textarea:focus { border-color: var(--accent-color); }

        .controls {
            display: flex;
            gap: 15px;
            align-items: end;
            margin-top: 15px;
        }
        
        .input-group { flex: 1; }
        .input-group label { display: block; color: var(--muted-text); margin-bottom: 5px; font-size: 0.9rem; }
        
        input[type="number"] {
            background: var(--input-bg);
            border: 1px solid var(--border-color);
            color: white;
            padding: 10px;
            border-radius: 6px;
            width: 100%;
            font-size: 1.1rem;
        }

        .btn-split {
            background: var(--accent-color);
            color: #000;
            border: none;
            padding: 10px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            height: 45px;
        }
        .btn-split:hover { background: var(--accent-hover); }

        /* --- Results Grid --- */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .result-card {
            background: #1a1a20;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            color: var(--accent-color);
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .result-text {
            background: #000;
            color: #ccc;
            border: 1px solid #333;
            padding: 10px;
            border-radius: 4px;
            height: 150px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.8rem;
            white-space: pre;
            margin-bottom: 10px;
        }

        .btn-copy {
            background: #2a2a3a;
            color: #fff;
            border: 1px solid #444;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.2s;
        }
        .btn-copy:hover { background: var(--success-color); color: #000; border-color: var(--success-color); }

    </style>
</head>
<body>

    <div class="nav-bar">
        <a href="index.html" class="nav-link">üìù Editor & Splitter</a>
        <a href="rebuilder.html" class="nav-link">üîó Merger & Rebuilder</a>
        <a href="splitter.html" class="nav-link active">‚ûó Text Divider</a>
    </div>

    <h1>AnimeSub <span style="color:var(--accent-color)">Divider</span></h1>
    <div class="subtitle">Equally divide lines into groups</div>

    <div class="container">
        
        <div class="input-card">
            <div style="display:flex; justify-content:space-between;">
                <strong>Input Lines</strong>
                <span id="lineCount" style="color:var(--muted-text)">0 lines</span>
            </div>
            <textarea id="inputText" placeholder="Paste your 300+ lines here..."></textarea>
            
            <div class="controls">
                <div class="input-group" style="max-width: 150px;">
                    <label>Divide into (Parts):</label>
                    <input type="number" id="partsInput" value="3" min="1">
                </div>
                <button class="btn-split" onclick="divideText()">‚ö° Divide Now</button>
            </div>
            <div id="mathInfo" style="margin-top:10px; color:var(--success-color); font-size:0.9rem;"></div>
        </div>

        <div id="resultsArea" class="results-grid">
            </div>

    </div>

    <script>
        const inputText = document.getElementById('inputText');
        const lineCount = document.getElementById('lineCount');

        inputText.addEventListener('input', () => {
            const lines = inputText.value.split(/\r?\n/).filter(line => line.trim() !== "").length;
            lineCount.innerText = `${lines} lines`;
        });

        function divideText() {
            const rawText = inputText.value;
            let lines = rawText.split(/\r?\n/);
            if(lines[lines.length-1].trim() === "") lines.pop(); 

            const totalLines = lines.length;
            const parts = parseInt(document.getElementById('partsInput').value) || 1;
            
            if (totalLines === 0) {
                alert("Please enter text first!");
                return;
            }

            const baseSize = Math.floor(totalLines / parts);
            const remainder = totalLines % parts;

            // Math Info
            let mathMsg = `Calculation: ${totalLines} √∑ ${parts} = ${baseSize} lines per part`;
            if (remainder > 0) mathMsg += ` (with ${remainder} lines distributed to first ${remainder} parts)`;
            document.getElementById('mathInfo').innerText = mathMsg;

            // Generate Cards
            const container = document.getElementById('resultsArea');
            container.innerHTML = '';

            let currentIdx = 0;
            for (let i = 0; i < parts; i++) {
                let extra = (i < remainder) ? 1 : 0;
                let size = baseSize + extra;
                
                let chunk = lines.slice(currentIdx, currentIdx + size);
                currentIdx += size;

                createResultCard(i + 1, chunk, container);
            }
        }

        function createResultCard(partNum, lines, container) {
            const div = document.createElement('div');
            div.className = 'result-card';
            
            const textContent = lines.join('\n');

            // FIX: ·ÄÖ·Ä¨·Äû·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ URL Encode ·Äú·ÄØ·Äï·Ä∫·Äï·Äº·ÄÆ·Ä∏·Äô·Äæ ·Äï·Ä≠·ÄØ·Ä∑·Äô·Äö·Ä∫·Åã ·Äí·Ä´·Äô·Äæ Backslash (\) ·Äê·ÄΩ·Ä± ·Äô·Äï·Äª·Ä±·Ä¨·ÄÄ·Ä∫·Äô·Äæ·Ä¨·Åã
            const safeText = encodeURIComponent(textContent);

            div.innerHTML = `
                <div class="card-header">
                    <span>Part ${partNum}</span>
                    <span>${lines.length} lines</span>
                </div>
                <div class="result-text">${escapeHtml(textContent)}</div>
                <button class="btn-copy" onclick="copyCard(this, '${safeText}')">üìã Copy Part ${partNum}</button>
            `;
            container.appendChild(div);
        }

        function copyCard(btn, encodedText) {
            // FIX: Copy ·ÄÄ·Ä∞·Ä∏·ÄÅ·Ä´·Äî·ÄÆ·Ä∏·Äô·Äæ ·ÄÖ·Ä¨·Äû·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ ·Äï·Äº·Äî·Ä∫·Äñ·Ä±·Ä¨·Ä∫ (Decode) ·Äô·Äö·Ä∫·Åã
            const text = decodeURIComponent(encodedText);

            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);

            const originalText = btn.innerText;
            btn.innerText = "‚úÖ Copied!";
            btn.style.background = "#00e676";
            btn.style.color = "black";
            
            setTimeout(() => {
                btn.innerText = originalText;
                btn.style.background = "";
                btn.style.color = "";
            }, 2000);
        }

        function escapeHtml(text) {
            return text.replace(/&/g, "&amp;")
                       .replace(/</g, "&lt;")
                       .replace(/>/g, "&gt;")
                       .replace(/"/g, "&quot;")
                       .replace(/'/g, "&#039;");
        }
    </script>
</body>
</html>